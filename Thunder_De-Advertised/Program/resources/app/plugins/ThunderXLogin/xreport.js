"function"!=typeof Object.assign&&(Object.assign=function(e){"use strict";if(null===e)throw new TypeError("Cannot convert undefined or null to object");e=Object(e);for(var t=1;t<arguments.length;t++){var n=arguments[t];if(null!==n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return e<10?"0"+e:e}function this_value(){return this.valueOf()}function quote(e){return rx_escapable.lastIndex=0,rx_escapable.test(e)?'"'+e.replace(rx_escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,o,i,a,u=gap,s=t[e];switch(s&&"object"==typeof s&&"function"==typeof s.toJSON&&(s=s.toJSON(e)),"function"==typeof rep&&(s=rep.call(t,e,s)),typeof s){case"string":return quote(s);case"number":return isFinite(s)?String(s):"null";case"boolean":case"null":return String(s);case"object":if(!s)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(s)){for(i=s.length,n=0;n<i;n+=1)a[n]=str(n,s)||"null";return o=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+u+"]":"["+a.join(",")+"]",gap=u,o}if(rep&&"object"==typeof rep)for(i=rep.length,n=0;n<i;n+=1)"string"==typeof rep[n]&&(r=rep[n],o=str(r,s),o&&a.push(quote(r)+(gap?": ":":")+o));else for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(o=str(r,s),o&&a.push(quote(r)+(gap?": ":":")+o));return o=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+u+"}":"{"+a.join(",")+"}",gap=u,o}}var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value);var gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;r<n;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,o=e[t];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(r=walk(o,n),void 0!==r?o[n]=r:delete o[n]);return reviver.call(e,t,o)}var j;if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(e){"use strict";function t(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n}function n(e,t){return e<<t|e>>>32-t}function r(e,r,o,i,a,u){return t(n(t(t(r,e),t(i,u)),a),o)}function o(e,t,n,o,i,a,u){return r(t&n|~t&o,e,t,i,a,u)}function i(e,t,n,o,i,a,u){return r(t&o|n&~o,e,t,i,a,u)}function a(e,t,n,o,i,a,u){return r(t^n^o,e,t,i,a,u)}function u(e,t,n,o,i,a,u){return r(n^(t|~o),e,t,i,a,u)}function s(e,n){e[n>>5]|=128<<n%32,e[(n+64>>>9<<4)+14]=n;var r,s,c,l,f,p=1732584193,d=-271733879,h=-1732584194,g=271733878;for(r=0;r<e.length;r+=16)s=p,c=d,l=h,f=g,p=o(p,d,h,g,e[r],7,-680876936),g=o(g,p,d,h,e[r+1],12,-389564586),h=o(h,g,p,d,e[r+2],17,606105819),d=o(d,h,g,p,e[r+3],22,-1044525330),p=o(p,d,h,g,e[r+4],7,-176418897),g=o(g,p,d,h,e[r+5],12,1200080426),h=o(h,g,p,d,e[r+6],17,-1473231341),d=o(d,h,g,p,e[r+7],22,-45705983),p=o(p,d,h,g,e[r+8],7,1770035416),g=o(g,p,d,h,e[r+9],12,-1958414417),h=o(h,g,p,d,e[r+10],17,-42063),d=o(d,h,g,p,e[r+11],22,-1990404162),p=o(p,d,h,g,e[r+12],7,1804603682),g=o(g,p,d,h,e[r+13],12,-40341101),h=o(h,g,p,d,e[r+14],17,-1502002290),d=o(d,h,g,p,e[r+15],22,1236535329),p=i(p,d,h,g,e[r+1],5,-165796510),g=i(g,p,d,h,e[r+6],9,-1069501632),h=i(h,g,p,d,e[r+11],14,643717713),d=i(d,h,g,p,e[r],20,-373897302),p=i(p,d,h,g,e[r+5],5,-701558691),g=i(g,p,d,h,e[r+10],9,38016083),h=i(h,g,p,d,e[r+15],14,-660478335),d=i(d,h,g,p,e[r+4],20,-405537848),p=i(p,d,h,g,e[r+9],5,568446438),g=i(g,p,d,h,e[r+14],9,-1019803690),h=i(h,g,p,d,e[r+3],14,-187363961),d=i(d,h,g,p,e[r+8],20,1163531501),p=i(p,d,h,g,e[r+13],5,-1444681467),g=i(g,p,d,h,e[r+2],9,-51403784),d=i(d,h,g,p,e[r+12],20,-1926607734),h=i(h,g,p,d,e[r+7],14,1735328473),p=a(p,d,h,g,e[r+5],4,-378558),g=a(g,p,d,h,e[r+8],11,-2022574463),h=a(h,g,p,d,e[r+11],16,1839030562),d=a(d,h,g,p,e[r+14],23,-35309556),p=a(p,d,h,g,e[r+1],4,-1530992060),g=a(g,p,d,h,e[r+4],11,1272893353),h=a(h,g,p,d,e[r+7],16,-155497632),d=a(d,h,g,p,e[r+10],23,-1094730640),p=a(p,d,h,g,e[r+13],4,681279174),g=a(g,p,d,h,e[r],11,-358537222),h=a(h,g,p,d,e[r+3],16,-722521979),d=a(d,h,g,p,e[r+6],23,76029189),p=a(p,d,h,g,e[r+9],4,-640364487),g=a(g,p,d,h,e[r+12],11,-421815835),h=a(h,g,p,d,e[r+15],16,530742520),d=a(d,h,g,p,e[r+2],23,-995338651),p=u(p,d,h,g,e[r],6,-198630844),g=u(g,p,d,h,e[r+7],10,1126891415),h=u(h,g,p,d,e[r+14],15,-1416354905),d=u(d,h,g,p,e[r+5],21,-57434055),p=u(p,d,h,g,e[r+12],6,1700485571),g=u(g,p,d,h,e[r+3],10,-1894986606),h=u(h,g,p,d,e[r+10],15,-1051523),d=u(d,h,g,p,e[r+1],21,-2054922799),p=u(p,d,h,g,e[r+8],6,1873313359),g=u(g,p,d,h,e[r+15],10,-30611744),h=u(h,g,p,d,e[r+6],15,-1560198380),d=u(d,h,g,p,e[r+13],21,1309151649),p=u(p,d,h,g,e[r+4],6,-145523070),g=u(g,p,d,h,e[r+11],10,-1120210379),h=u(h,g,p,d,e[r+2],15,718787259),d=u(d,h,g,p,e[r+9],21,-343485551),p=t(p,s),d=t(d,c),h=t(h,l),g=t(g,f);return[p,d,h,g]}function c(e){var t,n="";for(t=0;t<32*e.length;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function l(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;for(t=0;t<8*e.length;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function f(e){return c(s(l(e),8*e.length))}function p(e,t){var n,r,o=l(e),i=[],a=[];for(i[15]=a[15]=void 0,o.length>16&&(o=s(o,8*e.length)),n=0;n<16;n+=1)i[n]=909522486^o[n],a[n]=1549556828^o[n];return r=s(i.concat(l(t)),512+8*t.length),c(s(a.concat(r),640))}function d(e){var t,n,r="0123456789abcdef",o="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),o+=r.charAt(t>>>4&15)+r.charAt(15&t);return o}function h(e){return unescape(encodeURIComponent(e))}function g(e){return f(h(e))}function m(e){return d(g(e))}function v(e,t){return p(h(e),h(t))}function w(e,t){return d(v(e,t))}function y(e,t,n){return t?n?v(t,e):w(t,e):n?g(e):m(e)}e.md5=y}(this),function(e,t,n){t[e]=n()}("Fingerprint",this,function(){"use strict";var e=function(e){var t,n;t=Array.prototype.forEach,n=Array.prototype.map,this.each=function(e,n,r){if(null!==e)if(t&&e.forEach===t)e.forEach(n,r);else if(e.length===+e.length){for(var o=0,i=e.length;o<i;o++)if(n.call(r,e[o],o,e)==={})return}else for(var a in e)if(e.hasOwnProperty(a)&&n.call(r,e[a],a,e)==={})return},this.map=function(e,t,r){var o=[];return null===e?o:n&&e.map===n?e.map(t,r):(this.each(e,function(e,n,i){o[o.length]=t.call(r,e,n,i)}),o)},"object"==typeof e?(this.hasher=e.hasher,this.screen_resolution=e.screen_resolution,this.screen_orientation=e.screen_orientation,this.canvas=e.canvas,this.ie_activex=e.ie_activex):"function"==typeof e&&(this.hasher=e)};return e.prototype={get:function(){var e=[];if(e.push(navigator.userAgent),e.push(navigator.language),e.push(screen.colorDepth),this.screen_resolution){var t=this.getScreenResolution();"undefined"!=typeof t&&e.push(t.join("x"))}return e.push((new Date).getTimezoneOffset()),e.push(this.hasSessionStorage()),e.push(this.hasLocalStorage()),e.push(!!window.indexedDB),document.body?e.push(typeof document.body.addBehavior):e.push("undefined"),e.push(typeof window.openDatabase),e.push(navigator.cpuClass),e.push(navigator.platform),e.push(navigator.doNotTrack),e.push(this.getPluginsString()),this.canvas&&this.isCanvasSupported()&&e.push(this.getCanvasFingerprint()),e.join("###")},hasLocalStorage:function(){try{return!!window.localStorage}catch(e){return!0}},hasSessionStorage:function(){try{return!!window.sessionStorage}catch(e){return!0}},isCanvasSupported:function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},isIE:function(){return"Microsoft Internet Explorer"===navigator.appName||!("Netscape"!==navigator.appName||!/Trident/.test(navigator.userAgent))},getPluginsString:function(){return this.isIE()&&this.ie_activex?this.getIEPluginsString():this.getRegularPluginsString()},getRegularPluginsString:function(){return this.map(navigator.plugins,function(e){var t=this.map(e,function(e){return[e.type,e.suffixes].join("~")}).join(",");return[e.name,e.description,t].join("::")},this).join(";")},getIEPluginsString:function(){if(window.ActiveXObject){var e=["ShockwaveFlash.ShockwaveFlash","AcroPDF.PDF","PDF.PdfCtrl","QuickTime.QuickTime","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","RealPlayer","SWCtl.SWCtl","WMPlayer.OCX","AgControl.AgControl","Skype.Detection"];return this.map(e,function(e){try{return new ActiveXObject(e),e}catch(e){return null}}).join(";")}return""},getScreenResolution:function(){var e;return e=this.screen_orientation?screen.height>screen.width?[screen.height,screen.width]:[screen.width,screen.height]:[screen.height,screen.width]},getCanvasFingerprint:function(){try{var e=document.createElement("canvas"),t=e.getContext("2d"),n="thunder network";return t.textBaseline="top",t.font="14px Arial",t.textBaseline="alphabetic",t.fillStyle="#f60",t.fillRect(125,1,62,20),t.fillStyle="#069",t.fillText(n,2,15),t.fillStyle="rgba(102, 204, 0, 0.7)",t.fillText(n,4,17),md5(e.toDataURL())}catch(e){return""}}},e}),function(){"use strict";function t(){var e=document.currentScript;if(!e){var t=document.scripts;e=t[t.length-1]}return e}function unloadHandle(){if(!(ie&&new Date-clickJsLinkTime<50||closing)){closing=!0;var e=(new Date).getTime()-startTime;e/=1e3,XReport.pushNow({data:{category:"page_close",action:"page_close_succ",stayTime:e,pageUrl:location.href,pageUa:navigator.userAgent}})}}function feR(e,t,n){var r=e[t];e[t]=n(r)}function feN(e){return"function"!=typeof e?e:(e.__injected__||(e.__injected__=function(){try{return e.apply(this,arguments)}catch(e){throw s(e),w=!0,e}}),e.__injected__)}function feIsReq(e){if(!e)return null;var t={};return window.XMLHttpRequest?t={name:e.name,message:e.message,fileName:e.fileName||e.sourceURL,lineNumber:e.lineNumber||e.line,columnNumber:e.columnNumber||e.column}:t.message=e.message,t}function feStack(){var e;try{throw new Error("")}catch(t){e=t.stack}if(e)return e=e.replace(/(.*?)bugs(.*?)\.js(.*)\n?/gm,""),e=e.replace(/^Error\n/g,""),e="generated-stack:\n"+e}function feU(){for(var e,t=[],n=arguments.callee.caller.caller;n&&t.length<10;){var r=n.toString().match(/function\s*([\w\_$]+)?\s*\(/i);e=r&&r[1]||"[anonymous]",t.push(e),n=n.caller}return"generated-stack:\n"+t.join("\n")}function feLoad(e){if(!Fe.silentResource&&!e.message){var t;t=e.target?e.target:e.srcElement;var n=t&&t.outerHTML;n&&n.length>200&&(n=n.slice(0,200));var r={type:"resourceError",target:{outerHTML:n,src:t&&t.src,tagName:t&&t.tagName,id:t&&t.id,className:t&&t.className,name:t&&t.name,type:t&&t.type,XPath:feNode(t),selector:feTag(t),timeStamp:e.timeStamp}};if(t.src!==window.location.href&&(!t.src||!t.src.match(/.*\/(.*)$/)||t.src.match(/.*\/(.*)$/)[1])&&r.target.src&&window.XMLHttpRequest){var o=new XMLHttpRequest;o.Fundebug=!0,o.open("HEAD",r.target.src),o.send(),o.onload=function(e){200!==e.target.status&&(r.target.status=e.target.status,r.target.statusText=e.target.statusText),_FeReport(r)}}}}function feNode(e){for(var t=[];e&&e.nodeType==Node.ELEMENT_NODE;e=e.parentNode){var n,r=0,o=!1;for(n=e.previousSibling;n;n=n.previousSibling)n.nodeType!=Node.DOCUMENT_TYPE_NODE&&n.nodeName==e.nodeName&&++r;for(n=e.nextSibling;n&&!o;n=n.nextSibling)n.nodeName==e.nodeName&&(o=!0);var i=(e.prefix?e.prefix+":":"")+e.localName,a=r||o?"["+(r+1)+"]":"";t.splice(0,0,i+a)}return t.length?"/"+t.join("/"):null}function feTag(e){for(var t=[];e.parentNode;){if(e.id){t.unshift("#"+e.id);break}if(e==e.ownerDocument.documentElement)t.unshift(e.tagName);else{for(var n=1,r=e;r.previousElementSibling;r=r.previousElementSibling,n++);t.unshift(e.tagName+":nth-child("+n+")")}e=e.parentNode}return t.join(" > ")}function feFe(e){FEs.push(e),FEs.length>20&&FEs.shift()}function fePo(e){var t;t=e.target?e.target:e.srcElement;var n=t&&t.outerHTML;n&&n.length>200&&(n=n.slice(0,200)),feFe({type:"click",page:{url:window.location.href,title:document.title},detail:{outerHTML:n,tagName:t&&t.tagName,id:t&&t.id,className:t&&t.className,name:t&&t.name},time:(new Date).getTime()})}function feNav(e,t){FEhref=t;var n={type:"navigation",detail:{from:e,to:t},time:(new Date).getTime()};feFe(n)}function feVer(e){return!(Fe.silentHttp||0===e.detail.status&&/^file:\/\/\//.test(e.detail.url)||2===parseInt(e.detail.status/100))}function _FeReport(e){if(Fe.maxEventNumber&&Fe.febug){Fe.maxEventNumber-=1;var t={metaData:e.metaData||Fe.metaData,user:e.user||Fe.user,name:e.name,message:e.message,fileName:e.fileName,lineNumber:e.lineNumber,columnNumber:e.columnNumber,stacktrace:e.stacktrace,thunderVersion:localStorage.getItem("thunderVersion")||"unknown",type:e.type,severity:e.severity,target:e.target,req:e.req,res:e.res,breadcrumbs:FEs};t.userAgent&&t.userAgent.match(/Googlebot/)||feFilt(t)||FeReport(t)}}function feFilt(e){var t=Fe.filters;if(!t||!t.length)return!1;for(var n=0;n<t.length;n++)if(feBord(e,t[n]))return!0;return!1}function feBord(e,t){if(!e)return!1;if(Object.keys&&!Object.keys(t).length)return!1;for(var n in t)if(t.hasOwnProperty(n))if(t[n].constructor===RegExp){if(!t[n].test(e[n]))return!1}else{if(t[n].constructor!==Object)return!1;if(!feBord(e[n],t[n]))return!1}return!0}function FeReport(e){var t=Object.assign(e,{action:"bug",category:"xdas_bugs"});e&&XReport.nowReport(t)}var Fe={},FeConf=t();Fe.server=FeConf.getAttribute("server")||"";var Config={SERVER:"https://analysis-acc-ssl.xunlei.com/",DOMAIN:"xunlei.com"},Utils=function(){var e,t=[];return e={uuid:function(){for(var e=[],t="0123456789abcdef",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-";var r=e.join("");return r},queryCookie:function(e){var t,n,r,o=document.cookie,i=new Array;t=o.split("; ");for(var a=0;a<t.length;a++)r=t[a].split("="),n=r[0],0==n.indexOf(e)&&i.push(n);return i},getCookie:function(e){var t,n,r,o,i=document.cookie;if(e){if(t=null===i.match(new RegExp("(^| )"+e+"=([^;]*)"))?void 0:RegExp.$2,void 0!==t)try{t=decodeURIComponent(t)}catch(e){t=unescape(t)}return t?t:""}var a={};for(i=i.split("; "),r=0,o=i.length;r<o;++r){if(n=i[r].split("="),t=n.pop(),void 0!==t)try{t=decodeURIComponent(t)}catch(e){t=unescape(t)}a[n.shift()]=t}return a},setCookie:function(e,t,n,r,o,i){var a,n=!!n&&new Date((new Date).getTime()+n).toGMTString();a=e+"="+escape(t),a+="; path="+(o?o:"/"),r&&(a+="; domain="+r),i&&(a+="; secure"),n&&(a+="; expires="+n),document.cookie=a},delCookie:function(e,t,n,r){var o;o=e+"=",o+="; path="+(n?n:"/"),t&&(o+="; domain="+t),r&&(o+="; secure"),o+="; expires=Thu, 01 Jan 1970 00:00:01 GMT",document.cookie=o},bind:function(e,n,r,o){function i(e){e=e||window.event,e.target||(e.target=e.srcElement,e.preventDefault=function(){this.returnValue=!1},e.stopPropagation=function(){this.cancelBubble=!0}),!1===r.call(o||this,e)&&(e.preventDefault(),e.stopPropagation())}if("function"==typeof r){if("string"==typeof e&&(e=document.getElementById(e)),!e)throw new Error("bind on an undefined target");var a=n.split(".").shift();t.push({obj:e,handler:i,type:n}),e.attachEvent?e.attachEvent("on"+a,i):e.addEventListener&&e.addEventListener(a,i,!1)}},unbind:function(e,n){if("string"==typeof e&&(e=document.getElementById(e)),!e)throw new Error("unbind on an undefined target");var r,o,i,a,u;for(u=t.length-1;u>=0;u--)r=t[u],r.obj===e&&(o=r.type.split("."),i=o.shift(),a=o.length>0&&o.join("."),(r.type===n||n===i||a!==!1&&a===n)&&(t.splice(u,1),e.detachEvent?e.detachEvent("on"+i,r.handler):e.removeEventListener&&e.removeEventListener(i,r.handler,!1)))},_GET:function(){var e=location.search.length>0?location.search.substring(1):"",t={},n=e.length?e.split("&"):[],r=null,o=null,i=null,a=0,u=n.length;for(a=0;a<u;++a)r=n[a].split("="),o=decodeURIComponent(r[0]),i=decodeURIComponent(r[1]),o.length&&(t[o]=i);return t}(),randString:function(e,t){var n="abcdefghijklmnopqrstuvwxyz0123456789",r=n.length;t=t?Math.min(t,r):r;var o,i=[];for(o=0;o<e;o++)i.push(n.charAt(Math.floor(Math.random()*t)));return i.join("")},ajax:function(e,t,n,r,o){function i(){var e;try{e=new XMLHttpRequest}catch(t){try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){e=new ActiveXObject("Microsoft.XMLHTTP")}}return e}r=r||null,n=n||!0,t=t||"post";var a=i();a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){var e=decodeURI(a.responseText);o&&o(e)}},a.open(t,e,n),a.send(r)},imageRequest:function(e,t,n){if(e&&t){t.server&&""!=t.server||(t.server=Fe.server),e+=t.server,delete t.server,t.flowID&&(t.flowid=t.flowID,delete t.flowID);var r="xreport_log_"+ +new Date+Math.floor(1e3*Math.random()),o=window[r]=document.createElement("img"),i=[];for(var a in t)t[a]&&i.push(a+"="+encodeURIComponent(t[a]));o.onload=o.onerror=function(){window[r]=o=o.onload=o.onerror=null,n&&n()},o.src=e+(e.indexOf("?")<0?"?":"&")+i.join("&")}},reportHelper:function(t,n,r){function o(){e.imageRequest(t,n,function(){})}if(r&&r===!0){r=1;var i=+new Date+Math.floor(1e3*Math.random())+"-"+r}if(i||(i=n.reqid.split("-"),i=i[0]+"-"+r),n.reqid=i,r>1)var a=setTimeout(function(){clearTimeout(a),o()},600);else o()},iframeRequest:function(e,t,n,r,o){function i(e){u.onerror&&(u.onreadystatechange=u.onerror=u.onload=null,setTimeout(function(){u=null,l=null},500),f&&clearTimeout(f),e="string"==typeof e?e:void 0,"function"==typeof r&&r(e))}if(!e||!t)throw new Error("loginRequest can't accept empty method and url as param");var a,u,s,c,l,f,p=[],d="";if(e=e.toUpperCase(),l=document.createElement("form"),l.style.display="none",l.style.position="absolute",l.method=e,l.enctype="application/x-www-form-urlencoded",l.acceptCharset="UTF-8",n=n||{},n.cachetime=(new Date).getTime(),"_GET"===e){for(a in n)p.push(a+"="+n[a]);t.indexOf("#")>0&&(d="#"+t.split("#").pop(),t=t.split("#").shift()),t+=(t.indexOf("?")>=0?"&":"?")+p.join("&")+d}else for(a in n)c=document.createElement("textarea"),c.name=a,c.value=n[a],l.appendChild(c);document.body.appendChild(l),s="f"+this.randString(8),l.target=s;try{l.action=t}catch(e){l.setAttribute("action",t)}try{u=document.createElement('<iframe name="'+s+'">')}catch(e){u=document.createElement("iframe"),u.name=s}if(u.id=s,u.style.display="none",l.appendChild(u),o>0&&(f=setTimeout(function(){i("TIMEOUT")},o)),u.onerror=u.onload=i,u.onreadystatechange=function(e){"complete"==u.readyState&&i()},"_GET"===e)u.src=t;else try{l.submit()}catch(e){var a,h="";for(a in e)h+=a+":"+e[a]+";";alert(h)}}}}(),startTime=(new Date).getTime(),inited=!1,isIE6=!(!("ActiveXObject"in window)||"XMLHttpRequest"in window),ie=window.attachEvent&&!window.opera,closing,clickJsLinkTime;ie&&Utils.bind(document,"mouseup",function(e){var t=e.target||e.srcElement;1===t.nodeType&&/^ajavascript:/i.test(t.tagName+t.href)&&(clickJsLinkTime=new Date)});var XReport={clearCookie:function(){for(var e=Utils.queryCookie("r_s_"),t=0;t<e.length;t++)Utils.delCookie(e[t],"xunlei.com")},init:function(e){var t,n,r={elements:1,default:1,global:1};if("object"==typeof e){for(t in e)e.hasOwnProperty(t)&&t in r&&(Config[t]=e[t]);if(e.hasOwnProperty("elements")){n=Config.elements;for(t in n)XReport.reportByElement(n[t])}}},push:function(e){"conf"==e.type?XReport.init(e):"event"==e.type?XReport.pushEvent(e):"now"==e.type&&XReport.pushNow(e)},getFinalData:function(e){var t=Config.default||{},n=Config.global||{};return t=XReport.getDefParams(t),e=Object.assign(t,n,e),e=XReport.formatData(e)},bindReport:function(e,t,n){if("string"==typeof e&&(e=document.getElementById(e)),!e)throw new Error("配置有误,请参阅相关文档");return n=XReport.getFinalData(n),e===window&&"load"===t?void XReport.report(n):void XReport.bindElements(e,t,n)},nowReport:function(e){e=XReport.getFinalData(e),XReport.report(e)},pushEvent:function(e){var t,n=["element","event","data"];for(t in n)if(n.hasOwnProperty(t)&&!(n[t]in e))throw new Error("配置有误,请参阅相关文档"+t);XReport.bindReport(e.element,e.event,e.data)},pushNow:function(e){var t,n=["data"];for(t in n)if(n.hasOwnProperty(t)&&!(n[t]in e))throw new Error("配置有误,请参阅相关文档"+t);XReport.nowReport(e.data)},reportByElement:function(element){var k,attrObj,eventType,data={};if("string"==typeof element&&(element=document.getElementById(element)),element)for(k in element.attributes)if("object"==typeof element.attributes[k]&&0===element.attributes[k].name.indexOf("xr-")){if(eventType=element.attributes[k].name.replace(/xr-/g,""),attrObj=eval("("+element.attributes[k].value+")"),"object"!=typeof attrObj)throw new Error("元素属性配置有误,请参阅相关文档");XReport.bindReport(element,eventType,attrObj)}},getDefParams:function(e){var t,n={};for(t in e)if("cookie"===t)n=XReport.getDefaultByCookie(e[t]);else{if("query"!==t)throw new Error("默认属性配置有误,请参阅相关文档"+t);n=XReport.getDefaultByQuery(e[t])}return n},formatData:function(e){var t,n={category:1,action:1,bussiness:1,server:"",flowID:""},r={};for(t in e)e.hasOwnProperty(t)&&t in n&&(r[t]=e[t],delete e[t]);return r.extdata=JSON.stringify(e),r},getDefaultByCookie:function(e){var t,n={};for(t=0;t<e.length;t++)n[e[t]]=Utils.getCookie(e[t]);return n},getDefaultByQuery:function(e){var t,n={},r=Utils._GET;for(t=0;t<e.length;t++)r.hasOwnProperty(e[t])&&(n[e[t]]=r[e[t]]);return n},bindElements:function(e,t,n){Utils.bind(e,t,function(){XReport.report(n)})},generateFlowId:function(){var e=Utils.uuid();return Utils.setCookie("flowid",e,!1,Config.DOMAIN),e},report:function(e){var t=new Fingerprint({screen_resolution:!0,canvas:!0,ie_activex:!0}).get(),n=md5(t),r=Utils.getCookie("flowid");e.createtime=(new Date).getTime(),e.flowid=r?r:XReport.generateFlowId(),e.fingerprint=n,Utils.reportHelper(Config.SERVER,e,!0)}};XReport.clearCookie();var _xreport={push:XReport.push};Utils.bind(window,"beforeunload",unloadHandle),Utils.bind(window,"unload",unloadHandle);var w=!1;Fe.febug=FeConf.getAttribute("febug")||!1,Fe.maxEventNumber=FeConf.getAttribute("maxEventNumber")||10,Fe.silentResource=FeConf.getAttribute("silentResource")||!1,Fe.silentHttp=FeConf.getAttribute("silentHttp")||!1,Fe.silentConsole=FeConf.getAttribute("silentConsole")||!1,feR(window,"onerror",function(){return function(e,t,n,r,o){if(w)return void(w=!1);void 0===r&&window.event&&(r=window.event.errorCharacter);var i;i=t&&t!==window.location.href?t:null;var a=feIsReq(o);return _FeReport({message:e,lineNumber:n,columnNumber:r,fileName:i||a&&a.fileName,name:a&&a.name||"uncaught error",stacktrace:o&&o.stack||feU(),severity:"error",type:"uncaught"}),!1}});var H=!0;if(window.atob){if(window.ErrorEvent)try{window.ErrorEvent.prototype.hasOwnProperty("error")&&(H=!1)}catch(e){}}else H=!1;"EventTarget Window Node ApplicationCache AudioTrackList ChannelMergerNode CryptoOperation EventSource FileReader HTMLUnknownElement IDBDatabase IDBRequest IDBTransaction KeyOperation MediaController MessagePort ModalWindow Notification SVGElementInstance Screen TextTrack TextTrackCue TextTrackList WebSocket WebSocketWorker Worker XMLHttpRequest XMLHttpRequestEventTarget XMLHttpRequestUpload".replace(/\w+/g,function(e){if(H){var t=window[e]&&window[e].prototype;t&&t.hasOwnProperty&&t.hasOwnProperty("addEventListener")&&(feR(t,"addEventListener",function(e){return function(t,n,r,o){return n&&n.handleEvent&&(n.handleEvent=feN(n.handleEvent)),e.call(this,t,feN(n),r,o)}}),feR(t,"removeEventListener",function(e){return function(t,n,r){return e.call(this,t,n,r),e.call(this,t,feN(n),r)}}))}}),Fe.notify=function(e,t,n){if(e){var r={name:e||n&&n.name,message:t||n&&n.message,severity:n&&n.message||"warning",stacktrace:feStack(),type:"notification",user:n&&n.user,metaData:n&&n.metaData};return _FeReport(r)}},Fe.notifyError=function(e,t){if(e){var n=feIsReq(e);_FeReport({name:n.name||t&&t.name||"caught error",message:n.message||t&&t.message,stacktrace:e.stack,fileName:n.fileName,lineNumber:n.lineNumber,columnNumber:n.columnNumber,severity:t&&t.severity||"error",type:"caught",user:t&&t.user,metaData:t&&t.metaData})}},Fe.notifyHttpError=function(e,t,n){_FeReport({type:"httpError",req:e,res:t,user:n&&n.user,metaData:n&&n.metaData})},window.addEventListener&&window.addEventListener("unhandledrejection",function(e){Fe.notifyError(e.reason)}),window.addEventListener&&window.addEventListener("error",feLoad,!0);var FEs=[];window.addEventListener?window.addEventListener("click",fePo,!0):document.attachEvent("onclick",fePo);var FEhref={url:window.location.href};document.addEventListener?document.addEventListener("DOMContentLoaded",function(){FEhref={url:window.location.href,title:document.title}}):document.attachEvent("onreadystatechange",function(){FEhref={url:window.location.href,title:document.title}});var FEreload=window.onpopstate;window.onpopstate=function(){var e={url:window.location.href};if(FEhref.title||(FEhref.title=document.title),FEhref.url!==e.url&&feNav(FEhref,e),FEreload)return FEreload.apply(this,arguments)};var FEhistory=window.history.pushState;FEhistory&&(window.history.pushState=function(){FEhref={url:window.location.href,title:document.title};var e={};if(3===arguments.length&&(e.url=arguments[2]),FEhref.url!==e.url&&feNav(FEhref,e),FEhistory)return FEhistory.apply(this,arguments)});var FEhash=window.onhashchange;if(window.onhashchange,window.onhashchange=function(){var e={url:window.location.href,title:document.title};if(FEhref.url!==e.url&&feNav(FEhref,e),FEhash)return FEhash.apply(this,arguments)},window.Xreport instanceof Array)for(var i=0;i<window.Xreport.length;i++)_xreport.push(window.Xreport[i]);_xreport=Object.assign({},_xreport,Fe),window.Xreport=_xreport}();